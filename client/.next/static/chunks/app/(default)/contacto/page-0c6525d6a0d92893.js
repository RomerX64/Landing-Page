(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8067],{3359:(e,r,a)=>{Promise.resolve().then(a.bind(a,2694))},2694:(e,r,a)=>{"use strict";a.d(r,{default:()=>i});var t=a(5155),o=a(1455),s=a(2793),l=a(2155),n=a(2115);function i(){let[e,r]=(0,n.useState)(!1),[a,i]=(0,n.useState)({email:"",message:"",name:""}),[c,d]=(0,n.useState)({submitted:!1,error:!1,message:""}),{user:u}=(0,n.useContext)(o.Ay);(0,n.useEffect)(()=>{u&&i(e=>({...e,email:u.email||e.email,name:u.name||e.name}))},[u]);let m=e=>{let{name:r,value:a}=e.target;i(e=>({...e,[r]:a}))},g=async e=>{e.preventDefault(),r(!0);let{error:t}=await (0,l.$)(s.A.post("/contact",a));t?d({submitted:!0,error:!0,message:"Ha ocurrido un error. Por favor intenta de nuevo."}):(d({submitted:!0,error:!1,message:"\xa1Mensaje enviado con \xe9xito! Nos pondremos en contacto pronto."}),i({email:(null==u?void 0:u.email)||"",message:"",name:(null==u?void 0:u.name)||""})),r(!1)};return(0,t.jsx)("section",{className:"relative py-6 bg-gray-950",children:(0,t.jsxs)("div",{className:"max-w-3xl p-6 px-4 mx-auto bg-gray-900 rounded-xl sm:px-6",children:[(0,t.jsxs)("div",{className:"max-w-3xl mx-auto mb-12 text-center",children:[(0,t.jsx)("h2",{className:"animate-[gradient_6s_linear_infinite] bg-[linear-gradient(to_right,theme(colors.gray.200),theme(colors.indigo.200),theme(colors.gray.50),theme(colors.indigo.300),theme(colors.gray.200))] bg-[length:200%_auto] bg-clip-text font-nacelle text-3xl font-semibold text-transparent md:text-4xl","data-aos":"fade-up",children:"Cont\xe1ctanos"}),(0,t.jsx)("p",{className:"mt-4 text-gray-400","data-aos":"fade-up","data-aos-delay":200,children:"Env\xedanos un mensaje y te responderemos lo antes posible"})]}),(0,t.jsx)("div",{className:"max-w-xl mx-auto",children:(0,t.jsxs)("form",{onSubmit:g,className:"space-y-6","data-aos":"fade-up","data-aos-delay":300,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"name",className:"block mb-1 text-sm font-medium text-gray-300",children:"Nombre"}),(0,t.jsx)("input",{type:"text",id:"name",name:"name",value:a.name,onChange:m,required:!0,className:"w-full px-4 py-3 text-gray-200 bg-gray-800 border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Tu nombre"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block mb-1 text-sm font-medium text-gray-300",children:"Email"}),(0,t.jsx)("input",{type:"email",id:"email",name:"email",value:a.email,onChange:m,required:!0,className:"w-full px-4 py-3 text-gray-200 bg-gray-800 border border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"tu@email.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"message",className:"block mb-1 text-sm font-medium text-gray-300",children:"Mensaje"}),(0,t.jsx)("textarea",{id:"message",name:"message",value:a.message,onChange:m,required:!0,rows:4,className:"w-full px-4 py-3 text-gray-200 bg-gray-800 border border-gray-700 rounded-md min-h-20 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"\xbfEn qu\xe9 podemos ayudarte?"})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",disabled:e,className:"w-full px-6 py-3 text-white font-medium rounded-md ".concat(e?"bg-indigo-700 cursor-not-allowed":"bg-gradient-to-t from-indigo-600 to-indigo-500 hover:bg-[length:100%_150%]"," transition-all duration-200 shadow-[inset_0px_1px_0px_0px_theme(colors.white/.16)]"),children:e?"Enviando...":"Enviar mensaje"})}),c.submitted&&(0,t.jsx)("div",{className:"p-4 rounded-md ".concat(c.error?"bg-red-900/50 text-red-200":"bg-green-900/50 text-green-200"),"data-aos":"fade-up",children:c.message})]})})]})})}},1455:(e,r,a)=>{"use strict";a.d(r,{Ay:()=>u,Rs:()=>c,vu:()=>d});var t=a(5155),o=a(2115),s=a(2793),l=a(2155),n=a(2615),i=a(9208);let c=(0,o.createContext)({token:"",user:null,signInO:async()=>{throw Error("Not implemented")},signUp:async()=>{throw Error("Not implemented")},deleteUser:async()=>{throw Error("Not implemented")},mailIsValid:async()=>{throw Error("Not implemented")},updateUser:async()=>{throw Error("Not implemented")},signOut:async()=>{throw Error("Not implemented")},signInWithGoogle:async()=>{throw Error("Not implemented")},signUpWithGoogle:async()=>{throw Error("Not implemented")},requestResetPassword:async()=>{throw Error("Not implemented")},resetPassword:async()=>{throw Error("Not implemented")},verifyEmail:async()=>{throw Error("Not implemented")},initiatePasswordReset:async()=>{throw Error("Not implemented")},isLoading:!1}),d=e=>{let{children:r}=e,{data:a}=(0,n.useSession)(),[d,u]=(0,o.useState)(null),[m,g]=(0,o.useState)(""),[h,y]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async()=>{if(a&&a.user&&!d)try{y(!0);let{email:e,name:r}=a.user;e&&r&&await x(e,r)}catch(e){console.error("Error al procesar la sesi\xf3n de Google:",e)}finally{y(!1)}})()},[a,d]),(0,o.useEffect)(()=>{let e=localStorage.getItem("token")||i.A.get("token"),r=localStorage.getItem("user")||i.A.get("user");if(e&&g(e),r)try{u(JSON.parse(r))}catch(e){console.error("Error al parsear el usuario del localStorage o cookie",e)}},[]);let p=(0,o.useCallback)((e,r)=>{localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(e)),i.A.set("token",r,{expires:7}),i.A.set("user",JSON.stringify(e),{expires:7})},[]),f=(0,o.useCallback)(()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),i.A.remove("token"),i.A.remove("user"),Object.keys(localStorage).forEach(e=>{e.startsWith("subscripcion_")&&localStorage.removeItem(e)})},[]),x=(0,o.useCallback)(async(e,r)=>{try{y(!0);let{data:a,error:t}=await (0,l.$)(s.A.get("users/email/get/".concat(e)));if(t)throw Error(t.message);if(null==a?void 0:a.data){let{data:r,error:a}=await (0,l.$)(s.A.get("/users/get/".concat(e)));if(a||!r)throw Error((null==a?void 0:a.message)||"Error al obtener usuario existente");return u(r.data.User),g(r.data.token),p(r.data.User,r.data.token),r.data.User}let{data:o,error:n}=await (0,l.$)(s.A.post("/users/crearUser/google",{email:e,name:r}));if(n||!o)throw Error((null==n?void 0:n.message)||"Error al crear usuario");return u(o.data),g(o.data.token),p(o.data,o.data.token),o.data}catch(e){throw console.error("Error en el proceso de registro:",e),e}finally{y(!1)}},[p]),b=(0,o.useCallback)(async e=>{try{y(!0);let{data:r,error:a}=await (0,l.$)(s.A.post("/users/signIn",e));if(a||!(null==r?void 0:r.data))throw Error((null==a?void 0:a.message)||"Error de inicio de sesi\xf3n");let{User:t,token:o}=r.data;return g(o),u(t),p(t,o),t}catch(e){return console.error("Error en signIn:",e),null}finally{y(!1)}},[p]),w=(0,o.useCallback)(async e=>{try{y(!0);let{data:r,error:a}=await (0,l.$)(s.A.post("/users/signUp",e));if(a||!(null==r?void 0:r.data))throw Error((null==a?void 0:a.message)||"Error de registro");let{user:t,token:o}=r.data;return g(o),u(t),p(t,o),t}catch(e){throw console.error("Error en signUp:",e),e}finally{y(!1)}},[p]),E=(0,o.useCallback)(async e=>{try{y(!0);let{data:r,error:a}=await (0,l.$)(s.A.delete("/users/user",{data:e}));if(a||!(null==r?void 0:r.data))throw Error((null==a?void 0:a.message)||"Error al eliminar usuario");let t=r.data;return g(""),u(null),f(),t}catch(e){throw console.error("Error al eliminar usuario:",e),e}finally{y(!1)}},[f]),v=(0,o.useCallback)(async e=>{try{return y(!0),(await s.A.get("/users/email/".concat(e))).data}catch(e){return!1}finally{y(!1)}},[]),k=(0,o.useCallback)(async e=>{if(!(null==d?void 0:d.id))throw Error("Usuario no autenticado");try{y(!0);let{data:r,error:a}=await (0,l.$)(s.A.put("/users/update/".concat(d.id),{...e}));if(a||!(null==r?void 0:r.data))throw Error((null==a?void 0:a.message)||"Error al actualizar usuario");let{user:t,token:o}=r.data;return t&&(u(t),p(t,o||m)),t}catch(e){throw console.error("Error al actualizar usuario:",e),e}finally{y(!1)}},[d,p,m]),N=(0,o.useCallback)(async()=>{try{y(!0),await (0,n.signOut)({redirect:!1}),g(""),u(null),f()}catch(e){console.error("Error durante el cierre de sesi\xf3n:",e)}finally{y(!1)}},[f]),j=(0,o.useCallback)(async()=>{try{return y(!0),await (0,n.signIn)("google",{callbackUrl:"/"}),null}catch(e){return console.error("Error en signInWithGoogle:",e),null}finally{y(!1)}},[]),A=(0,o.useCallback)(async()=>j(),[j]),S=(0,o.useCallback)(async e=>{try{y(!0);let{data:r,error:a}=await (0,l.$)(s.A.post("/users/verify-email",{token:e}));if(a||!(null==r?void 0:r.data))throw Error((null==a?void 0:a.message)||"Error al verificar email");if(d&&d.id===r.data.user.id){let e={...r.data.user};u(e),localStorage.setItem("user",JSON.stringify(e)),i.A.set("user",JSON.stringify(e),{expires:7})}return r.data}catch(e){throw console.error("Error al verificar email:",e),e}finally{y(!1)}},[d]),C=(0,o.useCallback)(async e=>{try{y(!0);let{data:r,error:a}=await (0,l.$)(s.A.get("/users/initiate-password-reset/".concat(e)));if(a||!(null==r?void 0:r.data))throw Error((null==a?void 0:a.message)||"Error al solicitar restablecimiento de contrase\xf1a");return r.data}catch(e){throw console.error("Error al iniciar restablecimiento de contrase\xf1a:",e),e}finally{y(!1)}},[]),_=(0,o.useCallback)(async(e,r)=>{try{y(!0);let{data:a,error:t}=await (0,l.$)(s.A.post("/users/reset-password",{token:e,newPassword:r}));if(t||!(null==a?void 0:a.data))throw Error((null==t?void 0:t.message)||"Error al restablecer contrase\xf1a");return a.data}catch(e){throw console.error("Error al restablecer contrase\xf1a:",e),e}finally{y(!1)}},[]),I=(0,o.useMemo)(()=>({token:m,user:d,signInO:b,signUp:w,deleteUser:E,mailIsValid:v,updateUser:k,signOut:N,signInWithGoogle:j,signUpWithGoogle:A,verifyEmail:S,initiatePasswordReset:C,resetPassword:_,requestResetPassword:C,isLoading:h}),[m,d,b,w,E,v,k,N,j,A,S,C,_,h]);return(0,t.jsx)(c.Provider,{value:I,children:r})},u=c},2793:(e,r,a)=>{"use strict";a.d(r,{A:()=>o});let t=a(2651).A.create({baseURL:"http://localhost:3001",headers:{"Content-Type":"application/json"}});t.interceptors.request.use(e=>{{let r=localStorage.getItem("token");r&&(e.headers.Authorization="Bearer ".concat(r))}return e},e=>Promise.reject(e)),t.interceptors.response.use(e=>e,e=>Promise.reject(e));let o=t},2155:(e,r,a)=>{"use strict";a.d(r,{$:()=>t});let t=async e=>{try{return{data:await e}}catch(e){return console.error("Error en handleAsync:",e),{error:e.response?e.response.data:{message:e.message}}}}}},e=>{var r=r=>e(e.s=r);e.O(0,[2651,8014,8441,1517,7358],()=>r(3359)),_N_E=e.O()}]);