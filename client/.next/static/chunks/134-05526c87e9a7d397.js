"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[134],{3134:(e,r,t)=>{t.r(r),t.d(r,{default:()=>i});var a=t(5155),s=t(2115),o=t(6046),n=t(2783),l=t(7013);let i=()=>{let e=(0,o.useParams)(),r=(0,o.useRouter)(),t=null==e?void 0:e.slug,{getUser:i}=(0,s.useContext)(l.t),[c,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(!0),[g,p]=(0,s.useState)(null),[h,f]=(0,s.useState)(!1),[b,y]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{if(!t){p("ID de usuario no proporcionado"),m(!1);return}try{let e=await i(t);e?d(e):p("Usuario no encontrado")}catch(e){p("Error al cargar el usuario")}finally{m(!1)}})()},[t,i]);let w=async e=>{e.preventDefault(),f(!0),p(null),y(null);try{let r=new FormData(e.currentTarget),a={name:r.get("name"),email:r.get("email"),telefono:r.get("telefono"),company:r.get("company")};if(!t||!c)throw Error("Datos de usuario no disponibles");y("Usuario actualizado exitosamente"),d(e=>e?{...e,...a}:null)}catch(e){p(e instanceof Error?e.message:"Error al actualizar el usuario")}finally{f(!1)}};return u?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,a.jsx)(n.A,{className:"w-8 h-8 text-indigo-600 animate-spin"})}):g?(0,a.jsx)("div",{className:"max-w-md p-4 mx-auto mt-8 text-center bg-red-500 rounded-lg",children:(0,a.jsx)("p",{className:"text-white",children:g})}):(0,a.jsxs)("section",{className:"max-w-3xl px-4 py-6 mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white md:text-3xl",children:"Editar Usuario"}),(0,a.jsx)("button",{onClick:()=>r.back(),className:"px-4 py-2 text-sm text-white transition-colors bg-gray-700 rounded-lg hover:bg-gray-600",children:"Volver"})]}),b&&(0,a.jsx)("div",{className:"p-4 mb-6 text-center bg-green-600 rounded-lg",children:(0,a.jsx)("p",{className:"text-white",children:b})}),c&&(0,a.jsxs)("form",{onSubmit:w,className:"p-6 space-y-6 bg-gray-800 rounded-lg shadow-lg",children:[(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"block mb-2 text-sm font-medium text-white",children:"Nombre"}),(0,a.jsx)("input",{type:"text",id:"name",name:"name",defaultValue:c.name,required:!0,className:"w-full px-4 py-2 text-white bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-white",children:"Correo Electr\xf3nico"}),(0,a.jsx)("input",{type:"email",id:"email",name:"email",defaultValue:c.email,required:!0,className:"w-full px-4 py-2 text-white bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"telefono",className:"block mb-2 text-sm font-medium text-white",children:"Tel\xe9fono"}),(0,a.jsx)("input",{type:"tel",id:"telefono",name:"telefono",defaultValue:c.telefono||"",className:"w-full px-4 py-2 text-white bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"company",className:"block mb-2 text-sm font-medium text-white",children:"Empresa"}),(0,a.jsx)("input",{type:"text",id:"company",name:"company",defaultValue:c.company||"",className:"w-full px-4 py-2 text-white bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})]}),(0,a.jsx)("div",{className:"flex gap-4 pt-4",children:(0,a.jsx)("button",{type:"submit",disabled:h,className:"flex items-center justify-center w-full px-4 py-2 text-white transition-all rounded bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Actualizando..."]}):"Actualizar Usuario"})})]})]})}},3932:(e,r,t)=>{t.d(r,{A:()=>s});let a=t(2651).A.create({baseURL:"http://localhost:3001",headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{{let r=localStorage.getItem("token");r&&(e.headers.Authorization="Bearer ".concat(r))}return e},e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>Promise.reject(e));let s=a},7013:(e,r,t)=>{t.d(r,{X:()=>i,t:()=>l});var a=t(5155),s=t(2115),o=t(3932),n=t(2155);let l=(0,s.createContext)({getUsers:async()=>{throw Error("Not implemented")},getUsersSubscribed:async()=>{throw Error("Not implemented")},getUsersSubscribedAt:async()=>{throw Error("Not implemented")},getUser:async()=>{throw Error("Not implemented")},putAdmin:async()=>{throw Error("Not implemented")},getAllPlans:async()=>{throw Error("Not implemented")},createPlan:async()=>{throw Error("Not implemented")},updatePlan:async()=>{throw Error("Not implemented")},deletePlan:async()=>{throw Error("Not implemented")},getAllSubscriptions:async()=>{throw Error("Not implemented")},getSubscriptionById:async()=>{throw Error("Not implemented")},updateSubscriptionStatus:async()=>{throw Error("Not implemented")},cancelSubscription:async()=>{throw Error("Not implemented")}}),i=e=>{let{children:r}=e,t=async()=>{let e=localStorage.getItem("admin_users");if(e)return JSON.parse(e);let{data:r,error:t}=await (0,n.$)(o.A.get("/admin/users"));if(t||!r)throw Error((null==t?void 0:t.message)||"Error al obtener los usuarios.");return localStorage.setItem("admin_users",JSON.stringify(r.data)),r.data},s=async()=>{let e=localStorage.getItem("admin_usersSubscribed");if(e)return console.log("Cargando usuarios suscritos desde localStorage..."),JSON.parse(e);let{data:r,error:t}=await (0,n.$)(o.A.get("/admin/getUsersSubscribed"));if(t||!r)throw Error((null==t?void 0:t.message)||"Error al obtener usuarios suscritos.");return localStorage.setItem("admin_usersSubscribed",JSON.stringify(r.data)),r.data},i=async e=>{let r="admin_usersSubscribed_plan_".concat(e),t=localStorage.getItem(r);if(t)return JSON.parse(t);let{data:a,error:s}=await (0,n.$)(o.A.get("/admin/getUsersSubscribed/".concat(e)));if(s||!a)throw Error((null==s?void 0:s.message)||"Error al obtener usuarios suscritos al plan.");return localStorage.setItem(r,JSON.stringify(a.data)),a.data},c=async e=>{let{data:r,error:t}=await (0,n.$)(o.A.get("/admin/user/".concat(e)));if(t||!r)throw Error((null==t?void 0:t.message)||"Error al obtener el usuario.");return r.data},d=async e=>{let{data:r,error:t}=await (0,n.$)(o.A.put("/admin/admin/".concat(e)));if(t||!r)throw Error((null==t?void 0:t.message)||"Error al asignar rol admin.");return r.data},u=async()=>{let e=localStorage.getItem("admin_plans");if(e)return console.log("Cargando planes desde localStorage..."),JSON.parse(e);let{data:r,error:t}=await (0,n.$)(o.A.get("/admin/plans"));if(t||!r)throw Error((null==t?void 0:t.message)||"Error al obtener planes.");return localStorage.setItem("admin_plans",JSON.stringify(r.data)),r.data},m=async e=>{let{data:r,error:t}=await (0,n.$)(o.A.post("/admin/plans",e));if(t||!r)throw Error((null==t?void 0:t.message)||"Error al crear plan.");return localStorage.removeItem("admin_plans"),r.data},g=async(e,r)=>{let{data:t,error:a}=await (0,n.$)(o.A.put("/admin/plans/".concat(e),r));if(a||!t)throw Error((null==a?void 0:a.message)||"Error al actualizar plan.");return localStorage.removeItem("admin_plans"),t.data},p=async e=>{let{error:r}=await (0,n.$)(o.A.delete("/admin/plans/".concat(e)));if(r)throw Error(r.message||"Error al eliminar plan.");localStorage.removeItem("admin_plans")},h=async()=>{let e=localStorage.getItem("admin_subscriptions");if(e)return console.log("Cargando suscripciones desde localStorage..."),JSON.parse(e);let{data:r,error:t}=await (0,n.$)(o.A.get("/admin/subscriptions"));if(t||!r)throw Error((null==t?void 0:t.message)||"Error al obtener suscripciones.");return localStorage.setItem("admin_subscriptions",JSON.stringify(r.data)),r.data},f=async e=>{let{data:r,error:t}=await (0,n.$)(o.A.get("/admin/subscriptions/".concat(e)));if(t||!r)throw Error((null==t?void 0:t.message)||"Error al obtener suscripci\xf3n.");return r.data},b=async(e,r)=>{let{data:t,error:a}=await (0,n.$)(o.A.put("/admin/subscriptions/".concat(e,"/status"),{status:r}));if(a||!t)throw Error((null==a?void 0:a.message)||"Error al actualizar estado de suscripci\xf3n.");return localStorage.removeItem("admin_subscriptions"),t.data},y=async(e,r)=>{let{data:t,error:a}=await (0,n.$)(o.A.put("/admin/subscriptions/".concat(e,"/cancel"),{reason:r}));if(a||!t)throw Error((null==a?void 0:a.message)||"Error al cancelar suscripci\xf3n.");return localStorage.removeItem("admin_subscriptions"),t.data};return(0,a.jsx)(l.Provider,{value:{getUsers:t,getUsersSubscribed:s,getUsersSubscribedAt:i,getUser:c,putAdmin:d,getAllPlans:u,createPlan:m,updatePlan:g,deletePlan:p,getAllSubscriptions:h,getSubscriptionById:f,updateSubscriptionStatus:b,cancelSubscription:y},children:r})}},6046:(e,r,t)=>{var a=t(6658);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},2155:(e,r,t)=>{t.d(r,{$:()=>a});let a=async e=>{try{return{data:await e}}catch(e){return console.error("Error en handleAsync:",e),{error:e.response?e.response.data:{message:e.message}}}}},4057:(e,r,t)=>{t.d(r,{A:()=>i});var a=t(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,a.forwardRef)((e,r)=>{let{color:t="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:d,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:r,...n,width:s,height:s,stroke:t,strokeWidth:i?24*Number(l)/Number(s):l,className:o("lucide",c),...m},[...u.map(e=>{let[r,t]=e;return(0,a.createElement)(r,t)}),...Array.isArray(d)?d:[d]])}),i=(e,r)=>{let t=(0,a.forwardRef)((t,n)=>{let{className:i,...c}=t;return(0,a.createElement)(l,{ref:n,iconNode:r,className:o("lucide-".concat(s(e)),i),...c})});return t.displayName="".concat(e),t}},2783:(e,r,t)=>{t.d(r,{A:()=>a});let a=(0,t(4057).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])}}]);