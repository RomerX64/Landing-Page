"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[463],{463:(e,a,t)=>{t.r(a),t.d(a,{default:()=>v});var r=t(5155),s=t(2115),l=t(1455),n=t(4057);let o=(0,n.A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),i=(0,n.A)("UserPen",[["path",{d:"M11.5 15H7a4 4 0 0 0-4 4v2",key:"15lzij"}],["path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1817ys"}],["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}]]);var c=t(6046),d=t(8173),u=t.n(d);let m=(0,n.A)("CaptionsOff",[["path",{d:"M10.5 5H19a2 2 0 0 1 2 2v8.5",key:"jqtk4d"}],["path",{d:"M17 11h-.5",key:"1961ue"}],["path",{d:"M19 19H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2",key:"1keqsi"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M7 11h4",key:"1o1z6v"}],["path",{d:"M7 15h2.5",key:"1ina1g"}]]),x=(0,n.A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),p=(0,n.A)("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]),g=(0,n.A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),h=(0,n.A)("NotebookPen",[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]]);var y=t(6461),f=t(8232);let b=()=>{var e,a,t;let{sub:l,fetchSub:n,desuscribirse:o}=(0,s.useContext)(f.h),[i,c]=(0,s.useState)(!0),[d,b]=(0,s.useState)(null),[v,j]=(0,s.useState)(!1),[N,w]=(0,s.useState)(""),[k,E]=(0,s.useState)(!1),[A,C]=(0,s.useState)(!1),[S,I]=(0,s.useState)(null);if((0,s.useEffect)(()=>{let e=async()=>{c(!0);let e=await n();e&&b(e),c(!1)};l?(b(l),c(!1)):e()},[l,n]),i)return(0,r.jsx)("section",{className:"py-5 text-center text-gray-400",children:"Cargando suscripci\xf3n..."});if(!d)return(0,r.jsx)("section",{className:"py-5 text-center text-gray-400",children:"No tienes una suscripci\xf3n activa."});let P=d.fechaInicio?new Date(d.fechaInicio):null,U=d.fechaUltimaPaga?new Date(d.fechaUltimaPaga):null,D=d.fechaVencimiento?new Date(d.fechaVencimiento):null,M=async()=>{E(!0),I(null);try{await o(N)?(C(!0),await n()):I("No se pudo cancelar la suscripci\xf3n. Por favor, intenta de nuevo m\xe1s tarde.")}catch(e){I("Error al procesar la cancelaci\xf3n."),console.error("Error en cancelaci\xf3n:",e)}finally{E(!1)}},O=()=>{j(!1),w(""),C(!1),I(null)};return(0,r.jsxs)("section",{className:"px-2 py-3 mx-auto max-w-7xl",children:[(0,r.jsxs)("div",{className:"relative w-[75vw] mx-auto overflow-hidden bg-gray-800 shadow-2xl sm:px-6 rounded-2xl flex flex-col",children:[(0,r.jsxs)("div",{className:"relative flex flex-wrap items-center justify-between gap-3 px-4 py-6 md:flex-row",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("button",{onClick:()=>{j(!0)},className:"transition-transform transform hover:scale-110",children:(0,r.jsx)(m,{size:48,className:"text-red-400"})}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-transparent sm:text-4xl bg-clip-text bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400",children:null===(e=d.plan)||void 0===e?void 0:e.name}),(0,r.jsx)("div",{className:"relative group",children:d.status===y.i.ACTIVE?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"absolute hidden p-1 ml-2 text-sm text-green-500 left-7 group-hover:block",children:"Active"}),(0,r.jsx)(x,{className:"mt-1 ml-2 text-green-500"})]}):d.status===y.i.PAUSED?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"absolute hidden p-1 ml-2 text-sm text-teal-500 left-7 group-hover:block",children:"Paused"}),(0,r.jsx)(p,{className:"mt-1 ml-2 text-teal-500"})]}):d.status===y.i.CANCELLED?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"absolute hidden p-1 ml-2 text-sm text-red-500 left-7 group-hover:block",children:"Cancelled"}),(0,r.jsx)(g,{className:"mt-1 ml-2 text-red-500"})]}):d.status===y.i.PENDING?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"absolute hidden p-1 ml-2 text-sm text-yellow-500 left-7 group-hover:block",children:"Pending"}),(0,r.jsx)(m,{className:"mt-1 ml-2 text-yellow-500"})]}):d.status===y.i.APPROVED?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"absolute hidden p-1 ml-2 text-sm text-blue-500 left-7 group-hover:block",children:"Approved"}),(0,r.jsx)(x,{className:"mt-1 ml-2 text-blue-500"})]}):d.status===y.i.REJECTED?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"absolute hidden p-1 ml-2 text-sm text-gray-500 left-7 group-hover:block",children:"Rejected"}),(0,r.jsx)(g,{className:"mt-1 ml-2 text-gray-500"})]}):d.status===y.i.EXPIRED?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"absolute hidden p-1 ml-2 text-sm text-indigo-500 left-7 group-hover:block",children:"Expired"}),(0,r.jsx)(g,{className:"mt-1 ml-2 text-indigo-500"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"absolute hidden p-1 ml-2 text-sm text-gray-500 left-7 group-hover:block",children:"Unknown"}),(0,r.jsx)(g,{className:"mt-1 ml-2 text-gray-500"})]})})]}),(0,r.jsx)("p",{className:"text-sm text-indigo-200/65",children:d.id})]})]}),(0,r.jsx)("p",{className:"w-full text-xl font-bold text-transparent sm:text-2xl bg-clip-text bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 md:text-right md:w-auto",children:(null===(a=d.plan)||void 0===a?void 0:a.precio)>0?"$".concat(null===(t=d.plan)||void 0===t?void 0:t.precio,"/m"):"Free"})]}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"block text-gray-300",children:[(0,r.jsx)("strong",{children:"Subscrito: "}),P?P.toLocaleDateString():"N/A"]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"block text-gray-300",children:[(0,r.jsx)("strong",{children:"\xdaltima paga: "}),U?U.toLocaleDateString():"N/A"]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"block text-gray-300",children:[(0,r.jsx)("strong",{children:"Vencimiento: "}),D?D.toLocaleDateString():"N/A"]})})]}),(0,r.jsx)("div",{className:"flex justify-end my-4",children:(0,r.jsx)(u(),{href:"/planes",children:(0,r.jsx)("button",{className:"transition-transform transform text-indigo-200/65 hover:scale-110",children:(0,r.jsx)(h,{size:35})})})})]})]}),v&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,r.jsxs)("div",{className:"w-full max-w-md p-6 mx-auto bg-gray-800 rounded-lg",children:[(0,r.jsx)("h3",{className:"mb-4 text-xl font-bold text-white",children:"Cancelar Suscripci\xf3n"}),A?(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("div",{className:"p-4 mb-4 text-green-400 bg-green-900 rounded-md bg-opacity-20",children:"Tu suscripci\xf3n ha sido cancelada correctamente."}),(0,r.jsx)("button",{onClick:O,className:"w-full px-4 py-2 font-bold text-white bg-indigo-600 rounded hover:bg-indigo-700",children:"Cerrar"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"mb-4 text-gray-300",children:"\xbfEst\xe1s seguro de que deseas cancelar tu suscripci\xf3n? Perder\xe1s acceso a todos los beneficios al final del per\xedodo actual."}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"cancellationReason",className:"block mb-2 text-sm font-medium text-gray-300",children:"Motivo de cancelaci\xf3n (opcional)"}),(0,r.jsx)("textarea",{id:"cancellationReason",value:N,onChange:e=>w(e.target.value),className:"w-full p-2 text-white bg-gray-700 border border-gray-600 rounded-md focus:ring-indigo-500 focus:border-indigo-500",rows:3,placeholder:"\xbfPor qu\xe9 deseas cancelar tu suscripci\xf3n?"})]}),S&&(0,r.jsx)("div",{className:"p-4 mb-4 text-red-400 bg-red-900 rounded-md bg-opacity-20",children:S}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:O,className:"flex-1 px-4 py-2 font-bold text-white bg-gray-600 rounded hover:bg-gray-700",children:"Cancelar"}),(0,r.jsx)("button",{onClick:M,disabled:k,className:"flex-1 px-4 py-2 font-bold text-white bg-red-600 rounded hover:bg-red-700 ".concat(k?"opacity-50 cursor-not-allowed":""),children:k?"Procesando...":"Confirmar"})]})]})]})})]})},v=s.memo(()=>{let{user:e,updateUser:a,signOut:t}=(0,s.useContext)(l.Rs),n=(0,c.useRouter)(),[d,m]=(0,s.useState)({email:"",company:"",password:"",telefono:"",name:""}),[x,p]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{let a;return e?m({name:e.name||"",email:e.email||"",telefono:e.telefono||"",company:e.company||"",password:""}):a=setTimeout(()=>{null==n||n.push("/signin")},1e3),()=>{clearTimeout(a)}},[e,n]),!e)return null;let g=e=>{m({...d,[e.target.name]:e.target.value})},h=async t=>{t.preventDefault(),await a({...d,id:e.id}),p(!1)},y=()=>{p(!x)};return(0,r.jsxs)("section",{className:"px-2 py-3 mx-auto max-w-7xl",children:[(0,r.jsxs)("div",{className:"relative w-[75vw] mx-auto overflow-hidden bg-gray-800 shadow-2xl sm:px-6 rounded-2xl flex flex-col",children:[(0,r.jsxs)("div",{className:"relative flex flex-wrap items-center justify-between gap-3 px-4 py-6 md:flex-row",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(u(),{href:"/",onClick:()=>{t()},className:"transition-transform transform hover:scale-110",children:(0,r.jsx)(o,{size:48,className:"text-red-400"})}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("h2",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-indigo-200/65",children:e.id})]})]}),(0,r.jsx)("p",{className:"w-full text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 md:text-right md:w-auto",children:e.company})]}),(null==e?void 0:e.isAdmin)&&(0,r.jsx)("div",{className:"absolute top-0 right-0 px-3 py-1 text-lg rounded-l-lg bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-400 text-neutral-950",children:"Admin"}),(0,r.jsx)("div",{className:"p-4",children:x?(0,r.jsxs)("form",{onSubmit:h,children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-300",children:"Nombre"}),(0,r.jsx)("input",{type:"text",name:"name",value:d.name,onChange:g,className:"w-full px-3 py-2 mt-1 text-white bg-gray-700 rounded-lg"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-300",children:"Email"}),(0,r.jsx)("input",{type:"email",name:"email",value:d.email,onChange:g,className:"w-full px-3 py-2 mt-1 text-white bg-gray-700 rounded-lg"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-300",children:"Tel\xe9fono"}),(0,r.jsx)("input",{type:"text",name:"telefono",value:d.telefono,onChange:g,className:"w-full px-3 py-2 mt-1 text-white bg-gray-700 rounded-lg"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-300",children:"Empresa"}),(0,r.jsx)("input",{type:"text",name:"company",value:d.company,onChange:g,className:"w-full px-3 py-2 mt-1 text-white bg-gray-700 rounded-lg"})]})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("label",{className:"block text-gray-300",children:"Contrase\xf1a (dejar en blanco para no cambiar)"}),(0,r.jsx)("input",{type:"password",name:"password",value:d.password,onChange:g,className:"w-full px-3 py-2 mt-1 text-white bg-gray-700 rounded-lg",placeholder:"********"})]}),(0,r.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,r.jsx)("button",{type:"submit",className:"px-6 py-3 font-semibold text-white transition-transform transform rounded-lg shadow-md hover:scale-110 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700",children:"Guardar Cambios"}),(0,r.jsx)("button",{type:"button",onClick:y,className:"px-4 py-2 text-white transition-transform transform bg-gray-600 rounded-lg hover:bg-gray-700 hover:scale-110",children:"Cancelar"})]})]}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"block text-gray-300",children:[(0,r.jsx)("strong",{children:"Nombre:"})," ",d.name]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"block text-gray-300",children:[(0,r.jsx)("strong",{children:"Email:"})," ",d.email]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"block text-gray-300",children:[(0,r.jsx)("strong",{children:"Tel\xe9fono:"})," ",d.telefono]})}),(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"block text-gray-300",children:[(0,r.jsx)("strong",{children:"Empresa:"})," ",d.company]})})]}),(0,r.jsx)("div",{className:"flex justify-end mt-4",children:(0,r.jsx)("button",{onClick:y,className:"transition-transform transform text-indigo-200/65 hover:scale-110",children:(0,r.jsx)(i,{size:35})})})]})})]}),(0,r.jsx)(b,{})]})})},3932:(e,a,t)=>{t.d(a,{A:()=>s});let r=t(2651).A.create({baseURL:"http://localhost:3001",headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{{let a=localStorage.getItem("token");a&&(e.headers.Authorization="Bearer ".concat(a))}return e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>Promise.reject(e));let s=r},8232:(e,a,t)=>{t.d(a,{d:()=>c,h:()=>i});var r=t(5155),s=t(2115),l=t(3932),n=t(2155),o=t(1455);let i=(0,s.createContext)({sub:null,suscribirse:async()=>{},desuscribirse:async()=>!1,fetchSub:async()=>null}),c=e=>{let{children:a}=e,{user:t,signOut:c}=(0,s.useContext)(o.Ay),[d,u]=(0,s.useState)(null),m=async(e,a,t)=>{try{var r;let{data:s,error:o}=await (0,n.$)(l.A.post("/subscriptions",{planId:e,userEmail:t,paymentMethodToken:a}));if(o||!(null==s?void 0:null===(r=s.data)||void 0===r?void 0:r.subscription)){console.error("Error al suscribirse:",o||"No se retornaron datos");return}let i=s.data.subscription;u(i),localStorage.setItem("subscripcion",JSON.stringify(i))}catch(e){console.error("Excepci\xf3n en suscribirse:",e)}},x=async e=>{try{if(!d||!d.id)return console.error("No hay suscripci\xf3n activa para cancelar"),!1;let{data:a,error:t}=await (0,n.$)(l.A.post("/subscriptions/cancel",{subscriptionId:d.id,cancellationReason:e||"Cancelado por el usuario"}));if(t||!(null==a?void 0:a.data))return console.error("Error al cancelar la suscripci\xf3n:",t||"No se retornaron datos"),!1;let r=a.data.subscription;return u(r),r?localStorage.setItem("subscripcion",JSON.stringify(r)):localStorage.removeItem("subscripcion"),!0}catch(e){return console.error("Excepci\xf3n en desuscribirse:",e),!1}},p=async()=>{if(!t)return null;t.subscripcion&&u(t.subscripcion);let{data:e,error:a}=await (0,n.$)(l.A.get("/users/sub/".concat(t.id)));return!a&&(null==e?void 0:e.data)?(u(null==e?void 0:e.data),e.data):(console.log("Error al obtener la Subscripcion, error:",a||"No se retornaron datos"),null)};(0,s.useEffect)(()=>{t?p():(u(null),localStorage.removeItem("subscripcion"))},[t]);let g=(0,s.useMemo)(()=>({sub:d,suscribirse:m,desuscribirse:x,fetchSub:p}),[d,t]);return(0,r.jsx)(i.Provider,{value:g,children:a})}},1455:(e,a,t)=>{t.d(a,{Ay:()=>u,Rs:()=>c,vu:()=>d});var r=t(5155),s=t(2115),l=t(3932),n=t(2155),o=t(2615),i=t(9208);let c=(0,s.createContext)({token:"",user:null,signInO:async()=>{throw Error("Not implemented")},signUp:async()=>{throw Error("Not implemented")},deleteUser:async()=>{throw Error("Not implemented")},mailIsValid:async()=>{throw Error("Not implemented")},updateUser:async()=>{throw Error("Not implemented")},signOut:async()=>{throw Error("Not implemented")},signInWithGoogle:async()=>{throw Error("Not implemented")},signUpWithGoogle:async()=>{throw Error("Not implemented")},requestResetPassword:async()=>{throw Error("Not implemented")},resetPassword:async()=>{throw Error("Not implemented")}}),d=e=>{let{children:a}=e,{data:t}=(0,o.useSession)(),[d,u]=(0,s.useState)(null),[m,x]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{if(t&&t.user&&!d)try{let{email:e,name:a}=t.user;e&&a&&await p(e,a)}catch(e){console.error("Error al procesar la sesi\xf3n de Google:",e)}})()},[t]),(0,s.useEffect)(()=>{let e=localStorage.getItem("token")||i.A.get("token"),a=localStorage.getItem("user")||i.A.get("user");if(e&&x(e),a)try{u(JSON.parse(a))}catch(e){console.error("Error al parsear el usuario del localStorage o cookie",e)}},[]);let p=(0,s.useCallback)(async(e,a)=>{try{let{data:t,error:r}=await (0,n.$)(l.A.get("users/email/get/".concat(e)));if(r)return console.warn("Error al consultar existencia del usuario:",r.message),null;if(null==t?void 0:t.data){let{data:a,error:t}=await (0,n.$)(l.A.get("/users/get/".concat(e)));if(t||!a)return console.log("Error al traer el usuario:",null==t?void 0:t.message),null;return u(a.data.User),x(a.data.token),localStorage.setItem("token",a.data.token),localStorage.setItem("user",JSON.stringify(a.data.User)),i.A.set("token",a.data.token,{expires:7}),i.A.set("user",JSON.stringify(a.data.User),{expires:7}),a.data.User}let{data:s,error:o}=await (0,n.$)(l.A.post("/users/crearUser/google",{email:e,name:a}));if(o||!s)return console.log("Error al crear el usuario:",null==o?void 0:o.message),null;return u(s.data),localStorage.setItem("user",JSON.stringify(s.data)),i.A.set("user",JSON.stringify(s.data),{expires:7}),s.data}catch(e){return console.error("Error en el proceso de registro:",e),null}},[]),g=(0,s.useCallback)(async e=>{try{let{data:a,error:t}=await (0,n.$)(l.A.post("/users/signIn",e));if(t||!(null==a?void 0:a.data))throw Error((null==t?void 0:t.message)||"Error de inicio de sesi\xf3n");let{User:r,token:s}=a.data;return x(s),u(r),localStorage.setItem("token",s),localStorage.setItem("user",JSON.stringify(r)),i.A.set("token",s,{expires:7}),i.A.set("user",JSON.stringify(r),{expires:7}),r}catch(e){return console.error("Error en signIn:",e),null}},[]),h=(0,s.useCallback)(async e=>{let{data:a,error:t}=await (0,n.$)(l.A.post("/users/signUp",e));if(t||!(null==a?void 0:a.data))throw Error((null==t?void 0:t.message)||"Error de registro");let{User:r,token:s}=a.data;return x(s),u(r),localStorage.setItem("token",s),localStorage.setItem("user",JSON.stringify(r)),i.A.set("token",s,{expires:7}),i.A.set("user",JSON.stringify(r),{expires:7}),r},[]),y=(0,s.useCallback)(async e=>{let{data:a,error:t}=await (0,n.$)(l.A.delete("/users/user",{data:e}));if(t||!(null==a?void 0:a.data))throw Error((null==t?void 0:t.message)||"Error al eliminar usuario");let r=a.data;return x(""),u(null),localStorage.removeItem("token"),localStorage.removeItem("user"),i.A.remove("token"),i.A.remove("user"),r},[]),f=(0,s.useCallback)(async e=>{try{return(await l.A.get("/users/email/".concat(e))).data}catch(e){return!1}},[]),b=(0,s.useCallback)(async e=>{if(!(null==d?void 0:d.id))throw Error("Usuario no autenticado");let{data:a,error:t}=await (0,n.$)(l.A.put("/users/update/".concat(d.id),{...e}));if(t||!(null==a?void 0:a.data))throw Error((null==t?void 0:t.message)||"Error al actualizar usuario");let{User:r,token:s}=a.data;return r},[d]),v=(0,s.useCallback)(async()=>{try{await (0,o.signOut)({redirect:!1}),x(""),u(null),localStorage.removeItem("token"),localStorage.removeItem("user"),i.A.remove("token"),i.A.remove("user")}catch(e){console.error("Error durante el cierre de sesi\xf3n:",e)}},[]),j=(0,s.useCallback)(async()=>{try{return await (0,o.signIn)("google",{callbackUrl:"/"}),null}catch(e){return console.error("Error en signInWithGoogle:",e),null}},[]),N=(0,s.useCallback)(async()=>j(),[j]),w=(0,s.useCallback)(async e=>{let{data:a,error:t}=await (0,n.$)(l.A.post("/users/request-reset-password",{email:e}));if(t||!(null==a?void 0:a.data))throw Error((null==t?void 0:t.message)||"Error al solicitar reset de contrase\xf1a");return a.data},[]),k=(0,s.useCallback)(async(e,a)=>{let{data:t,error:r}=await (0,n.$)(l.A.post("/users/reset-password",{token:e,newPassword:a}));if(r||!(null==t?void 0:t.data))throw Error((null==r?void 0:r.message)||"Error al resetear contrase\xf1a");return t.data},[]),E=(0,s.useMemo)(()=>({token:m,user:d,signInO:g,signUp:h,deleteUser:y,mailIsValid:f,updateUser:b,signOut:v,signInWithGoogle:j,signUpWithGoogle:N,requestResetPassword:w,resetPassword:k}),[d,m,g,h,y,f,b,v,j,N,w,k]);return(0,r.jsx)(c.Provider,{value:E,children:a})},u=c},6461:(e,a,t)=>{t.d(a,{i:()=>r});var r=function(e){return e.ACTIVE="active",e.PAUSED="paused",e.CANCELLED="cancelled",e.PENDING="pending",e.APPROVED="approved",e.REJECTED="rejected",e.EXPIRED="expired",e}({})},6046:(e,a,t)=>{var r=t(6658);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}})},2155:(e,a,t)=>{t.d(a,{$:()=>r});let r=async e=>{try{return{data:await e}}catch(e){return console.error("Error en handleAsync:",e),{error:e.response?e.response.data:{message:e.message}}}}}}]);