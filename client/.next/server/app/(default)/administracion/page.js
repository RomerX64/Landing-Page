(()=>{var e={};e.id=823,e.ids=[823],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},99063:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c});var r=s(70260),a=s(28203),i=s(25155),n=s.n(i),l=s(67292),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["(default)",{children:["administracion",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9971)),"C:\\Users\\tomir\\OneDrive\\Desktop\\AssetlyLandingPage\\client\\app\\(default)\\administracion\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,91196)),"C:\\Users\\tomir\\OneDrive\\Desktop\\AssetlyLandingPage\\client\\app\\(default)\\administracion\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,26128)),"C:\\Users\\tomir\\OneDrive\\Desktop\\AssetlyLandingPage\\client\\app\\(default)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,19611)),"C:\\Users\\tomir\\OneDrive\\Desktop\\AssetlyLandingPage\\client\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"]}],d=["C:\\Users\\tomir\\OneDrive\\Desktop\\AssetlyLandingPage\\client\\app\\(default)\\administracion\\page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(default)/administracion/page",pathname:"/administracion",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},15633:(e,t,s)=>{Promise.resolve().then(s.bind(s,91196))},80785:(e,t,s)=>{Promise.resolve().then(s.bind(s,81078))},25e3:(e,t,s)=>{Promise.resolve().then(s.bind(s,91196))},11848:(e,t,s)=>{Promise.resolve().then(s.bind(s,81078))},81078:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(45512),a=s(79334),i=s(58009);let n=({getAllPlans:e,deletePlan:t})=>{let s=(0,a.useRouter)(),[n,l]=(0,i.useState)([]);(0,i.useEffect)(()=>{(async()=>{try{let t=await e();l(t)}catch(e){console.error("Error fetching plans:",e)}})()},[e]);let o=async e=>{try{await t(e),l(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error al eliminar el plan:",e)}};return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.length>0?n.map(e=>(0,r.jsxs)("div",{className:"p-4 bg-gray-700 rounded-lg shadow",children:[(0,r.jsx)("p",{className:"text-lg font-bold text-white",children:e.name}),(0,r.jsx)("p",{className:"text-gray-300",children:e.descripcion}),(0,r.jsxs)("p",{className:"text-gray-300",children:["Precio: $",e.precio]}),(0,r.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,r.jsx)("button",{onClick:()=>s.push(`/administracion/plan/${e.id}`),className:"px-3 py-1 text-sm text-white bg-blue-600 rounded hover:bg-blue-700",children:"Editar"}),(0,r.jsx)("button",{onClick:()=>o(e.id),className:"px-3 py-1 text-sm text-white bg-red-600 rounded hover:bg-red-700",children:"Eliminar"})]})]},e.id)):(0,r.jsx)("div",{className:"text-center text-gray-300 col-span-full",children:"No se encontraron planes."})}),(0,r.jsx)("button",{onClick:()=>s.push("/administracion/plan/nuevo"),className:"px-4 py-2 mt-4 text-white bg-green-600 rounded hover:bg-green-700",children:"Agregar Nuevo Plan"})]})};var l=s(62873);let o=({getAllSubscriptions:e,updateSubscriptionStatus:t,cancelSubscription:s})=>{let[a,n]=(0,i.useState)([]),[o,c]=(0,i.useState)(""),[d,u]=(0,i.useState)(null),[x,p]=(0,i.useState)(!0),m=async()=>{try{p(!0);let t=(await e()).map(e=>({...e,user:e.user?{id:e.user.id,email:e.user.email}:{id:"N/A",email:"N/A"}}));n(t)}catch(e){console.error("Error fetching subscriptions:",e)}finally{p(!1)}};(0,i.useEffect)(()=>{m()},[e]);let g=async e=>{try{await t(e,l.i.PAUSED),m()}catch(e){console.error("Error al actualizar la suscripci\xf3n:",e)}},h=async e=>{try{await t(e,l.i.ACTIVE),m()}catch(e){console.error("Error al activar la suscripci\xf3n:",e)}},b=async e=>{try{await s(e,"Cancelado por admin"),m()}catch(e){console.error("Error al cancelar la suscripci\xf3n:",e)}},f=e=>{switch(e){case l.i.ACTIVE:return"bg-green-600";case l.i.PAUSED:return"bg-blue-600";case l.i.CANCELLED:return"bg-red-600";case l.i.PENDING:return"bg-yellow-600";default:return"bg-gray-600"}},y=e=>e?new Date(e).toLocaleDateString():"N/A",j=a.filter(e=>{let t=e.id.toLowerCase().includes(o.toLowerCase())||e.user.email.toLowerCase().includes(o.toLowerCase())||e.plan.name.toLowerCase().includes(o.toLowerCase())||e.mercadopagoSubscriptionId&&e.mercadopagoSubscriptionId.toLowerCase().includes(o.toLowerCase()),s=!0;return null!==d&&(s=e.status===d),t&&s}),v=e=>{d===e?u(null):u(e)};return(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"mb-4 text-2xl font-bold text-white",children:"Suscripciones"}),(0,r.jsxs)("div",{className:"flex flex-col gap-4 mb-6 md:flex-row",children:[(0,r.jsx)("input",{type:"text",placeholder:"Buscar por ID, email o plan...",value:o,onChange:e=>c(e.target.value),className:"flex-1 px-4 py-2 text-white bg-gray-700 rounded-lg"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-4",children:Object.values(l.i).map(e=>(0,r.jsx)("button",{onClick:()=>v(e),className:`w-32 px-4 py-2 rounded-lg text-white transition-colors ${d===e?f(e):"bg-gray-700"}`,children:e},e))})]}),x?(0,r.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,r.jsx)("div",{className:"w-8 h-8 border-4 rounded-full border-t-indigo-600 animate-spin"})}):(0,r.jsx)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:j.length>0?j.map(e=>(0,r.jsxs)("div",{className:"p-2 bg-gray-700 rounded-lg shadow",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,r.jsxs)("p",{className:"text-xs font-bold text-white truncate",children:["ID: ",e.id]}),(0,r.jsx)("span",{className:`px-2 py-1 text-xs font-bold text-white rounded-full ${f(e.status)}`,children:e.status})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:["UserId",e.user.id]}),(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:["Email: ",e.user.email]}),(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:[(0,r.jsx)("span",{className:"font-medium",children:"Plan:"})," ",e.plan.name]}),(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:[(0,r.jsx)("span",{className:"font-medium",children:"Inicio:"})," ",y(e.fechaInicio)]}),(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:[(0,r.jsx)("span",{className:"font-medium",children:"\xdaltimo pago:"})," ",y(e.fechaUltimaPaga)]}),(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:[(0,r.jsx)("span",{className:"font-medium",children:"Vencimiento:"})," ",y(e.fechaVencimiento)]}),e.mercadopagoSubscriptionId&&(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:[(0,r.jsx)("span",{className:"font-medium",children:"MP ID:"})," ",(0,r.jsx)("span",{className:"text-xs text-gray-400 truncate",children:e.mercadopagoSubscriptionId})]}),e.cancellationDate&&(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:[(0,r.jsx)("span",{className:"font-medium",children:"Cancelada:"})," ",y(e.cancellationDate)]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 mt-3",children:[e.status===l.i.ACTIVE&&(0,r.jsx)("button",{onClick:()=>g(e.id),className:"px-3 py-1 text-sm text-white bg-yellow-600 rounded hover:bg-yellow-700",children:"Pausar"}),e.status===l.i.PAUSED&&(0,r.jsx)("button",{onClick:()=>h(e.id),className:"px-3 py-1 text-sm text-white bg-green-600 rounded hover:bg-green-700",children:"Activar"}),e.status===l.i.PENDING&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>h(e.id),className:"px-3 py-1 text-sm text-white bg-green-600 rounded hover:bg-green-700",children:"Aprobar"}),(0,r.jsx)("button",{onClick:()=>b(e.id),className:"px-3 py-1 text-sm text-white bg-red-600 rounded hover:bg-red-700",children:"Cancelar"})]}),(e.status===l.i.ACTIVE||e.status===l.i.PAUSED)&&(0,r.jsx)("button",{onClick:()=>b(e.id),className:"px-3 py-1 text-sm text-white bg-red-600 rounded hover:bg-red-700",children:"Cancelar"})]})]},e.id)):(0,r.jsx)("div",{className:"text-center text-gray-300 col-span-full",children:"No se encontraron suscripciones."})})]})},c=({user:e,onClose:t,onEdit:s})=>(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,r.jsxs)("div",{className:"w-11/12 p-6 bg-gray-800 rounded-lg shadow-lg md:w-1/2 lg:w-1/3",children:[(0,r.jsx)("h2",{className:"mb-4 text-2xl font-bold text-white",children:"Detalles del Usuario"}),(0,r.jsx)("div",{className:"space-y-2 text-gray-300",children:Object.entries(e).filter(([e])=>"password"!==e&&"isAdmin"!==e).map(([e,t])=>(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("span",{className:"mr-2 font-bold",children:[e,":"]}),(0,r.jsx)("span",{children:"object"==typeof t?JSON.stringify(t):String(t)})]},e))}),(0,r.jsxs)("div",{className:"flex justify-end mt-4",children:[(0,r.jsx)("button",{onClick:t,className:"px-4 py-2 text-white transition-all rounded bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700",children:"Cerrar"}),(0,r.jsx)("button",{onClick:()=>s(e.id),className:"px-4 py-2 ml-2 text-white transition-all rounded bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700",children:"Modificar"})]})]})}),d=({getUsers:e,planes:t})=>{let s=(0,a.useRouter)(),[n,l]=(0,i.useState)([]),[o,d]=(0,i.useState)(""),[u,x]=(0,i.useState)(null),[p,m]=(0,i.useState)(!1),[g,h]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{try{let t=await e();l(t)}catch(e){console.error("Error fetching users:",e)}})()},[e]);let b=n.filter(e=>{let t=e.name.toLowerCase().includes(o.toLowerCase())||e.email.toLowerCase().includes(o.toLowerCase())||e.id.toLowerCase().includes(o.toLowerCase()),s=!0;return null!==u&&(s=!!e.subscripcion?.plan&&e.subscripcion.plan.id===u),t&&s}),f=e=>{u===e?x(null):x(e)},y=e=>{h(e),m(!0)};return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4 mb-6 md:flex-row",children:[(0,r.jsx)("input",{type:"text",placeholder:"Buscar por nombre, email o ID...",value:o,onChange:e=>d(e.target.value),className:"flex-1 px-4 py-2 text-white bg-gray-700 rounded-lg"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-4",children:t.map(e=>(0,r.jsx)("button",{onClick:()=>f(e.id),className:`w-32 px-4 py-2 rounded-lg text-white transition-colors ${u===e.id?"bg-indigo-600":"bg-gray-700"}`,children:e.name},e.id))})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:b.length>0?b.map(e=>(0,r.jsxs)("div",{onClick:()=>y(e),className:"relative p-4 transition-colors bg-gray-700 rounded-lg shadow cursor-pointer hover:bg-gray-600",children:[(0,r.jsx)("p",{className:"text-lg font-bold text-white",children:e.name}),e.isAdmin&&(0,r.jsx)("div",{className:"absolute flex items-center justify-center w-4 h-4 text-xs font-bold rounded-full top-2 right-2 bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-400 text-neutral-950",children:"A"}),(0,r.jsx)("p",{className:"text-gray-300",children:e.email}),(0,r.jsxs)("p",{className:"text-sm text-gray-400",children:["ID: ",e.id]})]},e.id)):(0,r.jsx)("div",{className:"text-center text-gray-300 col-span-full",children:"No se encontraron usuarios."})}),p&&g&&(0,r.jsx)(c,{user:g,onClose:()=>{h(null),m(!1)},onEdit:e=>{s.push(`/user/${e}`)}})]})};var u=s(37793),x=s(10935);let p=()=>{let{planes:e}=(0,i.useContext)(x.U),{getUsers:t,getAllPlans:s,deletePlan:a,getAllSubscriptions:l,updateSubscriptionStatus:c,cancelSubscription:p}=(0,i.useContext)(u.t),[m,g]=(0,i.useState)("usuarios");return(0,r.jsxs)("section",{className:"w-11/12 px-4 py-3 mx-auto max-w-7xl",children:[(0,r.jsx)("h1",{className:"mb-4 text-3xl font-bold text-white",children:"Panel de Administraci\xf3n"}),(0,r.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,r.jsx)("button",{onClick:()=>g("usuarios"),className:`px-4 py-2 rounded ${"usuarios"===m?"bg-indigo-600":"bg-gray-700 text-white"}`,children:"Usuarios"}),(0,r.jsx)("button",{onClick:()=>g("planes"),className:`px-4 py-2 rounded ${"planes"===m?"bg-indigo-600":"bg-gray-700 text-white"}`,children:"Planes"}),(0,r.jsx)("button",{onClick:()=>g("suscripciones"),className:`px-4 py-2 rounded ${"suscripciones"===m?"bg-indigo-600":"bg-gray-700 text-white"}`,children:"Suscripciones"})]}),"usuarios"===m&&(0,r.jsx)(d,{getUsers:t,planes:e}),"planes"===m&&(0,r.jsx)(n,{getAllPlans:s,deletePlan:a}),"suscripciones"===m&&(0,r.jsx)(o,{getAllSubscriptions:l,updateSubscriptionStatus:c,cancelSubscription:p})]})}},62873:(e,t,s)=>{"use strict";s.d(t,{i:()=>r});var r=function(e){return e.ACTIVE="active",e.PAUSED="paused",e.CANCELLED="cancelled",e.PENDING="pending",e}({})},79334:(e,t,s)=>{"use strict";var r=s(58686);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},91196:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\tomir\\\\OneDrive\\\\Desktop\\\\AssetlyLandingPage\\\\client\\\\app\\\\(default)\\\\administracion\\\\layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\tomir\\OneDrive\\Desktop\\AssetlyLandingPage\\client\\app\\(default)\\administracion\\layout.tsx","default")},9971:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>i});var r=s(62740),a=s(91196);let i={title:"Administacion - Assetly",description:"Page description"};function n(){return(0,r.jsx)(a.default,{})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[994,659,902,81,753],()=>s(99063));module.exports=r})();